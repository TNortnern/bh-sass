# Check if only documentation files are being committed (skip further checks for docs-only commits)
STAGED_FILES=$(git diff --cached --name-only)
NON_DOC_FILES=$(echo "$STAGED_FILES" | grep -v '\.md$' | grep -v '\.txt$' || true)

if [ -z "$NON_DOC_FILES" ]; then
  echo "ğŸ“ Only documentation files staged"
  echo "âœ… Pre-commit checks passed!"
  exit 0
fi

# Run lint-staged for ESLint checks
echo "ğŸ” Running lint-staged..."
pnpm exec lint-staged || exit 1

# Run TypeScript checks for Nuxt
echo "ğŸ” Running Nuxt TypeScript checks..."
cd nuxt && pnpm typecheck || exit 1
cd ..

# Note: Payload TypeScript checks currently skipped due to build-time issues
# TODO: Re-enable once Payload typecheck is fixed
# echo "Running Payload TypeScript checks..."
# cd payload && pnpm typecheck || exit 1
# cd ..

echo "âœ… Pre-commit checks passed!"
